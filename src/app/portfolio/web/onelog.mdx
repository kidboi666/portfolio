import {ResponsiveGrid} from "../../../components/shared/responsive_grid";
import Image from "next/image";

<br/>

> 하루 한 문장씩 - 당신의 감정을 기록하세요.

<br />
<br />

  ## 프로젝트 개요

<ResponsiveGrid>
  ### Project Name

  - 하루한줄 (OneLog)
</ResponsiveGrid>
---
<ResponsiveGrid>
  ### Overview

  - 하루한줄은 사용자가 하루의 감정을 한 줄로 표현하거나 긴 글로 기록할 수 있는 서비스입니다.
</ResponsiveGrid>
---
<ResponsiveGrid>
  ### Development Period

  - 2024.9 - 2024.12 (3개월)
  - 2025.10 부터 FSD 아키텍처 개선 작업 진행중
</ResponsiveGrid>
---
<ResponsiveGrid>
  ### Project Link

  - https://one-sentence-gray.vercel.app
</ResponsiveGrid>
<ResponsiveGrid>
  ### Github Link

  - https://github.com/log-mind-365/onelog
</ResponsiveGrid>

<br />
<br />

## 개발 방식
<ResponsiveGrid columnRatio={1} className='[&>*:first-child]:justify-self-center'>
  <Image src='/images/portfolio/onelog/planning.png' alt='개발 방식 이미지' width={400} height={400} className='rounded-lg shadow-lg' />

  <div>
    ### Planning
  - 포트폴리오 목적의 프로젝트로, 과도한 복잡성을 피하고 핵심 기능에 집중
  - 사용자 경험 중심의 간결한 설계
  - FSD 원칙을 유지하면서도 프로젝트 규모에 맞는 적절한 복잡도 유지
  </div>
</ResponsiveGrid>
---
<ResponsiveGrid columnRatio={1} className='[&>*:first-child]:justify-self-center'>
  <Image src='/images/portfolio/onelog/components.png' alt="shadcnui 컴포넌트들 이미지" width={400} height={400} className='rounded-lg shadow-lg' />

  <div>
  ### Design
  - shadcn/ui 라이브러리를 기반으로 모던하고 일관된 UI/UX 구축
  </div>
</ResponsiveGrid>
---
<ResponsiveGrid columnRatio={1} className='[&>*:first-child]:justify-self-center'>
  <Image src='/images/portfolio/onelog/onelog_erd.png' alt='백엔드 ERD 이미지' width={400} height={400} className='rounded-lg shadow-lg' />

  <div>
    ### Backend
    - Supabase 사용으로 부가적인 백엔드 구축 없이 백엔드 관련 로직 구현
    - Drizzle ORM을 통해 전반적인 데이터베이스 쿼리, 디버깅 이슈를 피하고자 ORM 자체 RLS API 사용
  </div>
</ResponsiveGrid>


<br />
<br />

## 기술 스택
<ResponsiveGrid>
  ### Framework

  - Next.js (App Router)\
  서버사이드 렌더링의 특징을 사용하여 SEO 최적화, 앱 라우터의 폴더 컨벤션으로 네비게이션에서 불필요한 오버헤드 제거
  - TypeScript\
  JS의 약타입 특성을 최소화, 생산성 저하를 막기 위해 필수적인 부분에 한해 타입핑
  - React\
  TanStack Query와 Next.js의 강력한 조합을 위해 서버 컴포넌트 적극 활용
</ResponsiveGrid>
---
<ResponsiveGrid>
  ### Styling

  - tailwindcss\
  복잡한 스타일링과 파일 관리 및 클래스 작명에 고민을 덜고자 선택, 빠른 생산성과 중복 스타일링 관리 용이
  - shadncn/ui\
  모던하고 일관된 스타일과, 공통 UI 컴포넌트 작성에 불필요한 시간 낭비 최소화
</ResponsiveGrid>
---
<ResponsiveGrid>
  ### State Management

  - TanStack Query\
  prefetchQuery, queryOption, InfiniteQuery, onMutate 등 강력한 유틸리티를 이용해 프론트 개발 편의성 증대
  - zustand\
  모달과 같은 전역 상태 관리와 persist API를 이용한 로컬 스토리지 관리
</ResponsiveGrid>
---
<ResponsiveGrid>
  ### Form Validation

  - React Hook Form\
  사용자 폼 검증을 통해 안정적인 입출력 관리와 짧은 코드만으로 즉각적인 시각적 피드백
  - Zod\
  폼 검증과 데이터 검증을 최소화된 코드로 쉽게 정의
</ResponsiveGrid>
---
<ResponsiveGrid>
  ### Backend

  - Supabase\
  Baas 서비스로 추가적인 서버 관리 없이 손쉽게 프로젝트 구축, 안전한 인증 관리와 Storage등의 부가 서비스 적극 사용
  - Drizzle ORM\
  프로젝트 바운더리 내에서 서버 코드 관리, Postgresql의 RLS 지원으로 손쉬운 정책 및 데이터 쿼리 작성
</ResponsiveGrid>

<br />
<br />

## 프로젝트 구조

```text
onelog/
├── 📁 src/                    # 소스 코드
│   ├── 📁 app/               # Next.js App Router (라우팅)
│   ├── 📁 entities/          # 비즈니스 엔티티 (CRUD)
│   ├── 📁 features/          # 비즈니스 기능 (사용자 액션)
│   ├── 📁 widgets/           # 복합 UI 컴포넌트
│   ├── 📁 views/             # 페이지 뷰 컴포넌트
│   ├── 📁 shared/            # 공유 유틸리티
│   └── 📁 db/                # 데이터베이스 (스키마, 마이그레이션)
├── 📁 docs/                   # 프로젝트 문서
└── 📁 public/                 # 정적 파일
```

<br />
<br />

## 주요 성과

<ResponsiveGrid columnRatio={1} className="h-[400px]" >
  ```typescript
    const HomePage = async () => {
      const queryClient = getQueryClient();
      const user = await getCurrentUser();

      void Promise.all([
        queryClient.prefetchQuery(userQueries.getUserInfo(user?.id ?? null)),
        queryClient.prefetchInfiniteQuery(articleQueries.infinite(user?.id ?? null),),
      ]);

      return (
      <HydrationBoundary state={dehydrate(queryClient)}>
        <Suspense
          fallback={
            <PageContainer>
              <Spinner />
            </PageContainer>
          }
        >
          <HomePageView />
        </Suspense>
      </HydrationBoundary>
      );
    };

    export default HomePage;
  ```

  <div>
    ### 서버 컴포넌트 페이지 라우팅

    - 서버 컴포넌트로서
  </div>
</ResponsiveGrid>
---
<ResponsiveGrid columnRatio={1} className="[&>*:nth-child(odd)]:md:text-left h-[400px]" >
  ```typescript
    const HomePageView = () => {
      const { data: user } = useQuery(userQueries.getUserInfo, {
        retry: false,
      });
    }
  ```

  <div>
    ###
  </div>
</ResponsiveGrid>



## 개발 스크립트

### 클라이언트
```bash
npm run dev          # 개발 서버 실행
npm run build        # 프로덕션 빌드
npm run start        # 프로덕션 서버 실행
npm run lint         # ESLint 실행
npm run gen-types    # Supabase 타입 생성
```

### 서버
```bash
npm run start        # 프로덕션 모드 실행
npm run start:dev    # 개발 모드 실행 (watch)
npm run start:debug  # 디버그 모드 실행
npm run build        # 빌드
npm run test         # 테스트 실행
```

## 주요 특징

### 1. 감정 기록의 시각화
잔디밭 형태의 캘린더로 감정의 흐름을 한눈에 파악할 수 있습니다. 각 날짜는 감정 농도에 따라 다른 색상으로 표시됩니다.

### 2. 직관적인 에디터
TipTap 기반의 마크다운 에디터로 이미지, 링크, 코드 블록 등 다양한 콘텐츠를 작성할 수 있습니다.

### 3. 소셜 기능
팔로우, 댓글, 좋아요 등의 소셜 기능으로 다른 사용자와 소통할 수 있습니다.

### 4. 할일 관리 통합
감정 기록과 함께 할일을 관리하여 일상을 체계적으로 정리할 수 있습니다.

### 5. 반응형 디자인
모바일, 태블릿, 데스크톱 모든 기기에서 최적화된 경험을 제공합니다.

## 데이터베이스 스키마

### Post (게시물)
- `id`: 게시물 고유 ID
- `content`: 게시물 내용
- `emotion_level`: 감정 농도 (0-10)
- `created_at`: 생성 시간
- `updated_at`: 수정 시간
- `viewed`: 조회수
- `favorite`: 좋아요 수
- `is_public`: 공개 여부

### Comment (댓글)
- `id`: 댓글 고유 ID
- `content`: 댓글 내용
- `post_id`: 게시물 ID (외래키)
- `user_id`: 작성자 ID
- `created_at`: 생성 시간

### Garden (잔디밭)
- `id`: 잔디밭 고유 ID
- `year_month`: 년도와 월 (예: '2024.11')
- `posts`: 해당 월의 게시물 정보
- `created_at`: 생성 시간

## 기여하기

이 프로젝트는 개인 프로젝트이지만, 피드백과 제안은 언제나 환영합니다.

## 라이선스

이 프로젝트는 개인 프로젝트입니다.

## 문의

프로젝트에 대한 문의사항이 있으시면 이슈를 등록해주세요.